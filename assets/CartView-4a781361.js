import{_ as m,o as d,c as r,d as t,F as u,f as g,g as _,t as c,a as f,h as I,v as $}from"./index-d515bf11.js";const{VITE_APP_URL:n,VIPE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"wlc",BASE_URL:"/Vue_winter_week6/",MODE:"production",DEV:!1,PROD:!0},C={data(){return{text:"hello",products:[],productId:"",cart:{},lodingItem:"",lodingItema:"",isLoading:!1,tempProduct:{},data:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{doAjax(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)},getCart(){this.$http.get(`${n}/v2/api/${i}/cart`).then(e=>{this.cart=e.data.data,console.log(this.cart)}).catch(e=>{alert(e.response.data.message)})},updateCart(e){this.lodingItem=e.id;const s={product_id:e.product.id,qty:e.qty};console.log(s),this.$http.put(`${n}/v2/api/${i}/cart/${e.id}`,{data:s}).then(h=>{alert("更新成功"),this.getCart(),this.lodingItem=""}).catch(h=>{alert(h.response.data.message)})},deleteCartItem(e){this.lodingItem=e.id,this.$http.delete(`${n}/v2/api/${i}/cart/${e.id}`).then(s=>{alert("刪除成功"),this.lodingItem="",this.getCart()}).catch(s=>{alert(s.data.message),this.lodingItem=""})},deleteCartAll(){this.lodingItem="123",this.$http.delete(`${n}/v2/api/${i}/carts`).then(e=>{console.log(e.data),alert("刪除成功"),this.lodingItem="",this.getCart()}).catch(e=>{alert(e.data.message),this.lodingItem=""})},order(){console.log(this.data);const e={data:this.data};this.$http.post(`${n}/v2/api/${i}/order`,e).then(s=>{console.log(s.data),this.$refs.form.resetForm()}).catch(s=>{alert(s.response.data.message)}),this.cart="",this.$refs.form.resetForm()},resetForm(){console.log(this.$refs.form),this.$refs.form.resetForm()}},mounted(){this.doAjax(),this.getCart()}},v=t("h1",null,"這是購物車頁面",-1),x={class:"table align-middle"},P=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),b=["onClick","disabled"],y={key:0,class:"fas fa-spinner fa-pulse"},V={class:"input-group input-group-sm"},A=["onUpdate:modelValue","onChange","disabled"],k=["value"],E={class:"text-end"},L=t("td",{colspan:"3",class:"text-end"},"總計",-1),T={class:"text-end"};function w(e,s,h,D,l,p){return d(),r(u,null,[v,t("table",x,[P,t("tbody",null,[l.cart.carts?(d(!0),r(u,{key:0},g(l.cart.carts,a=>(d(),r("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>p.deleteCartItem(a),disabled:l.lodingItem===a.id},[l.lodingItem===a.id?(d(),r("i",y)):_("",!0),f(" x ")],8,b)]),t("td",null,c(a.product.title),1),t("td",null,[t("div",V,[I(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>a.qty=o,onChange:o=>p.updateCart(a),disabled:l.lodingItem===a.id},[(d(),r(u,null,g(20,o=>t("option",{value:o,key:o+"45621"},c(o),9,k)),64))],40,A),[[$,a.qty]])])]),t("td",E,c(a.total),1)]))),128)):_("",!0)]),t("tfoot",null,[t("tr",null,[L,t("td",T,c(l.cart.total),1)])])])],64)}const U=m(C,[["render",w]]);export{U as default};
